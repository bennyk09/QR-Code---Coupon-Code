<!DOCTYPE html>
<html>
<head>
  <title>Claim Code</title>
  <style>
    body { font-family: Arial; text-align:center; padding:40px; }
    #code { font-size:45px; font-weight:700; margin:15px 0; letter-spacing:6px; }
    button { 
      padding:12px 20px; 
      font-size:18px; 
      border-radius:10px; 
      background:#4f46e5; 
      border:none; 
      color:white; 
      cursor:pointer; 
    }
    .success { color:green; font-size:22px; margin-top:10px; }
    .used { color:red; font-size:22px; margin-top:10px; }
  </style>
</head>
<body>

  <h2>QR Code Claim</h2>
  <div id="code">------</div>

  <div id="status"></div>

  <button id="claimBtn" onclick="claimNow()">Claim</button>

  <script>
    const params = new URLSearchParams(window.location.search);
    const code = params.get("c");

    document.getElementById("code").textContent = code ?? "NO CODE";

    const key = "qr_" + code;
    const status = localStorage.getItem(key);

    if (!code) {
      document.getElementById("status").innerHTML = "<div class='used'>Invalid code</div>";
      document.getElementById("claimBtn").style.display = "none";
    }

    if (status === "used") {
      document.getElementById("status").innerHTML = "<div class='used'>This QR is already claimed ❌</div>";
      document.getElementById("claimBtn").style.display = "none";
    }

    function claimNow() {
      localStorage.setItem(key, "used");

      document.getElementById("status").innerHTML = "<div class='success'>Claimed Successfully ✔</div>";
      document.getElementById("claimBtn").style.display = "none";
    }
  </script>

</body>
</html>
